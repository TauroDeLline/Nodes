# README: Hemi Node 

## Описание
Этот скрипт предназначен для автоматизированного развертывания ноды Hemi в контейнере Docker. Он поддерживает генерацию ключей, установку, обновление, изменение комиссии и управление контейнером через `docker compose`.

## Основные функции
1. **Установка Docker и Docker Compose**: Проверяется наличие Docker и `docker compose`. При необходимости они устанавливаются автоматически.
2. **Генерация или ввод ключа**:
   - Если ключ не указан, скрипт генерирует новый с помощью временного Docker-контейнера.
   - Сгенерированный ключ сохраняется в файле `popm-address.json` и выводится в консоль.
3. **Создание окружения**:
   - Создаются файлы `Dockerfile` и `docker-compose.yml` для контейнера Hemi.
   - Настройки (приватный ключ, комиссия) сохраняются в `.env`.
4. **Управление контейнером**:
   - Установка контейнера.
   - Обновление контейнера с использованием новой версии бинарника.
   - Изменение комиссии без перезапуска контейнера.

## Запуск

   ```bash
   wget -O Hemi_Install https://raw.githubusercontent.com/TauroDeLline/Nodes/main/Hemi/Hemi_Install && chmod +x Hemi_Install && ./Hemi_Install
   ```


### Действия
При запуске скрипта вы можете выбрать одно из действий:
1. **Установить контейнер**:
   - Настраивает и запускает контейнер с нодой Hemi.
2. **Обновить контейнер до последней версии**:
   - Скачивает последнюю версию бинарника и обновляет контейнер.
3. **Обновить комиссию**:
   - Изменяет значение комиссии без полной перезагрузки контейнера.

## Вывод информации
1. Если генерируется новый ключ, скрипт выводит:
   - Приватный ключ.
   - Адрес `pubkey_hash`.
2. После установки выводятся команды для управления контейнером:
   ```bash
   docker logs -f Hemi  # Просмотр логов
   docker exec -it Hemi bash  # Вход в контейнер
   ```

## Логи
- Логи доступны через команду:
  ```bash
  docker logs -f Hemi
  ```
- Максимальный размер логов настроен на 10MB с ротацией до 3 файлов.

## Требования
- Ubuntu 22.04.
- Установленные пакеты: `wget`, `tar`, `jq`, `bash` (устанавливаются автоматически).

## Примечания
- Ссылка на бинарник в скрипте статична. При выходе новой версии обновите переменную `BINARY_URL`.
- Контейнер называется `Hemi` (с заглавной буквы).

## Возможные ошибки
1. **Docker не установлен**:
   - Проверьте наличие Docker и повторите попытку.
2. **Проблема с подключением**:
   - Проверьте интернет-соединение для скачивания бинарников.

## Контакты
Для вопросов и предложений свяжитесь с разработчиком.

